# 🚀 平行相机 - 快速开始

## ✅ 最新更新

### **🚀 新功能：Mega 双重模式**
- ✅ 一次拍摄，同时生成写实和脑洞两个版本！
- ✅ BeReal 风格的双照片对比展示
- ✅ 可以分别保存或一键保存全部
- ✅ 渐变色设计（白色→黄色）

### **Bug修复：图片生成问题**
- ✅ 修复了后端返回字段不匹配的问题
- ✅ 现在拍照后会正常进行：分析 → 生成 → 展示

### **Bug修复：取景框问题**
- ✅ 修复了取景框和实际照片大小不一致
- ✅ 完美适配 iPhone 14 Plus
- ✅ 所见即所得，精准裁剪

### **交互优化：全新结果展示**
- ✅ 生成完成后**全屏展示**新照片
- ✅ 底部可以**上滑展开** prompt 详情
- ✅ **保存按钮**更醒目（黄色主按钮）
- ✅ 简洁的「再拍一张」按钮

---

## 🎨 当前设计风格

采用 **Snapchat + BeReal** 风格：
- ⚫ 纯黑背景
- 💛 黄色强调色 (#FFFC00)
- ⚪ 简洁白色元素
- ✨ Sparkles 图标代表脑洞模式
- 📸 相机图标代表写实模式
- 🚀 火箭图标代表双重模式（新！）

---

## 🎯 使用流程

### **拍摄：**
1. 打开应用（默认进入拍摄页）
2. 选择模式：
   - **写实** 📸 - 生成真实感照片
   - **脑洞** ✨ - 添加创意元素
   - **双重** 🚀 - 同时生成写实+脑洞两个版本（新！）
3. 点击大圆形按钮拍照

### **处理：**
- 自动分析照片
- 脑洞模式会生成创意元素
- **双重模式会依次生成两个版本：**
  - 步骤 1/5: 分析照片
  - 步骤 2/5: 生成写实版本
  - 步骤 3/5: 构思创意
  - 步骤 4/5: 生成脑洞版本
  - 步骤 5/5: 完成！

### **结果：**

**单模式（写实/脑洞）：**
- 全屏查看生成的照片
- 上滑展开查看详情
- 点击「保存」下载照片

**双重模式（新！）：**
- **BeReal 风格双照片展示**
  - 主屏幕：写实版本（大图）
  - 右上角：脑洞版本（小图，带黄色边框）
- 点击「切换视图」交换显示
- 上滑展开查看：
  - 写实描述
  - 脑洞描述
  - 原始照片
  - GPS 位置
- 保存选项：
  - 「保存全部」- 同时保存两张
  - 「下载写实版」- 单独保存
  - 「下载脑洞版」- 单独保存

---

## 🔥 关键特性

### **两种拍摄模式：**

**📸 写实模式：**
- VLM 分析原图 + GPS
- 生成写实风格照片

**✨ 脑洞模式（三步流程）：**
1. VLM 分析原图 + GPS
2. VLM 生成脑洞创意元素
3. 图像生成模型融合原图 + 描述 + 创意元素

**🚀 双重模式（五步流程）：**
1. VLM 分析原图 + GPS
2. VLM 生成写实版本
3. VLM 构思创意
4. 图像生成模型融合原图 + 描述 + 创意元素
5. 生成脑洞版本

### **技术栈：**
- 前端：React + TypeScript + Tailwind
- 后端：Supabase Edge Functions
- VLM：Gemini 2.0 Flash
- 图像生成：Gemini 2.5 Flash Image
- 存储：Supabase KV Store

---

## 🐛 问题排查

### **照片生成失败：**
1. 检查控制台错误信息
2. 确认 GEMINI_API_KEY 已配置
3. 查看 Supabase Functions 日志

### **相机不工作：**
1. 确认浏览器权限
2. HTTPS 环境（PWA 要求）
3. 或使用上传功能

### **PWA 无法安装：**
1. 确认 HTTPS
2. 检查 manifest.json 加载
3. 查看 Service Worker 状态
4. 生成并放置图标文件

---

## 📚 更多文档

- `PWA-SETUP.md` - PWA 详细配置指南
- `Attributions.md` - 技术栈说明

---

## 🎉 完成！

你的应用现在已经：
- ✅ 修复了图片生成问题
- ✅ 优化了结果展示交互
- ✅ 配置了 PWA 功能
- ✅ 采用了 Snapchat + BeReal 简洁设计

**下一步：**
1. 生成应用图标（icon-192.png, icon-512.png）
2. 部署到 Vercel
3. 在手机上测试安装

Enjoy! 🚀📸✨